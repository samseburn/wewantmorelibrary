<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>우리는 더 많은 도서관을 원한다</title>
    <meta name="author" content="koseokyoung" />
    <meta name="keywords" content="작은도서관, 도서관, 서울시" />
    <meta name="description" content="서울시 작은도서관 현황 아카이빙" />
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.css"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./style.css" />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.js"></script>
    <script defer src="./script.js"></script>
    <script defer src="./scripts/filter.js"></script>
    <script defer src="./scripts/sidebar.js"></script>
  </head>
  <body>
    <div id="map"></div>
    <aside class="filter">
      <ul class="filter-category">
        <li class="filter-category-item all">
          <button type="button" data-id="전체">전체</button>
        </li>
        <li class="filter-category-item gu-list">
          <button type="button">구별보기</button>
        </li>
      </ul>
      <div class="filter-list">
        <ul>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="강남구">
              강남구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="강동구">
              강동구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="강북구">
              강북구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="강서구">
              강서구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="관악구">
              관악구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="광진구">
              광진구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="구로구">
              구로구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="금천구">
              금천구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="도봉구">
              도봉구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="동대문구">
              동대문구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="동작구">
              동작구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="마포구">
              마포구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="서대문구">
              서대문구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="서초구">
              서초구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="성동구">
              성동구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="성북구">
              성북구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="송파구">
              송파구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="양천구">
              양천구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="영등포구">
              영등포구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="용산구">
              용산구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="은평구">
              은평구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="종로구">
              종로구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="중구">
              중구
            </button>
          </li>
          <li class="filter-item">
            <button type="button" class="filter-button" data-id="중랑구">
              중랑구
            </button>
          </li>
        </ul>
      </div>
    </aside>

    <button type="button" class="sidebar-open-button"><span>+</span></button>
    <aside class="sidebar">
      <header class="sidebar-header">
        <h1 class="title">우리는 더 많은 도서관을 원한다</h1>
        <p>작은 도서관 아카이빙 사이트</p>
      </header>

      <!-- NOTE: 필터 버튼을 클릭한 경우 -->
      <div class="sidebar-content">
        <ul class="sidebar-list"></ul>
      </div>

      <!-- NOTE: 필터 버튼을 클릭하지 않은 경우 -->
      <div class="sidebar-content">
        <p class="placeholder">보고 싶은 구를 클릭하세요</p>
      </div>
    </aside>

    <script>
      // 사이드바 토글 기능
      const sidebar = document.querySelector('.sidebar');
      const sidebarOpenBtn = document.querySelector('.sidebar-open-button');

      sidebarOpenBtn.addEventListener('click', function () {
        sidebar.classList.toggle('is-active');
      });

      // 필터 버튼 기능
      const filterCategoryBtns = document.querySelectorAll(
        '.filter-category-item'
      );
      const all = document.querySelector('.filter-category-item.all');
      const guList = document.querySelector('.filter-category-item.gu-list');
      const filterBtnList = document.querySelector('.filter-list');
      const filterBtns = document.querySelectorAll('.filter-button');

      // 전체 + 구별보기
      filterCategoryBtns.forEach((button) => {
        button.addEventListener('click', function (e) {
          removeClass(filterCategoryBtns);
          button.classList.toggle('is-active');
        });
      });

      guList.addEventListener('click', function (e) {
        filterBtnList.classList.toggle('is-shown');
      });

      if (
        !guList.classList.contains('is-active') &&
        all.classList.contains('is-active')
      ) {
        filterBtnList.classList.remove('is-shown');
      }

      filterBtns.forEach((button) => {
        button.addEventListener('click', function (e) {
          removeClass(filterBtns);
          button.classList.toggle('is-active');
        });
      });

      function removeClass(btns) {
        btns.forEach((button) => {
          console.log(button);
          if (button.classList.contains('is-active')) {
            button.classList.remove('is-active');
          }
        });
      }
    </script>
  </body>
</html>
